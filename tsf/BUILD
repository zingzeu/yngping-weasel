cc_library(
    name = "headers",
    hdrs = [
        "CandidateList.h",
        "Compartment.h",
        "EditSession.h",
        "Globals.h",
        "KeyEvent.h",
        "LanguageBar.h",
        "Register.h",
        "WeaselTSF.h",
        "ctffunc.h",
        "stdafx.h",
        "targetver.h",
    ],
    deps = [
        "//common:weasel_common",
        "//ipc:interface",
        "//ui:lib",
    ],
)

cc_binary(
    name = "yptsf.dll",
    srcs = [
        "CandidateList.cpp",
        "Compartment.cpp",
        "Composition.cpp",
        "EditSession.cpp",
        "Globals.cpp",
        "KeyEvent.cpp",
        "KeyEventSink.cpp",
        "LanguageBar.cpp",
        "Register.cpp",
        "Server.cpp",
        "TextEditSink.cpp",
        "ThreadMgrEventSink.cpp",
        "WeaselTSF.cpp",
        "dllmain.cpp",
        "stdafx.cpp",
    ],
    defines = [
        "WIN32",
        "_WINDOWS",
        "_USRDLL",
        "WEASELTSF_EXPORTS",
        "UNICODE",
        "_UNICODE",
    ],
    linkshared = 1,
    win_def_file = "WeaselTSF.def",
    deps = [
        ":headers",
        "//common:resource",
        "//common:response_parser",
        "//common:weasel_common",
        "//ipc/client:lib",
    ],
)
